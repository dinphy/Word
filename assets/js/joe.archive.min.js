document.addEventListener("DOMContentLoaded",function(){const e=e=>window.btoa(unescape(encodeURIComponent(e))),t=e=>decodeURIComponent(escape(window.atob(e)));var a=$(".joe_archive__list").attr("data-wow");"off"!==a&&a&&new WOW({boxClass:"wow",animateClass:"animated ".concat(a),offset:0,mobile:!0,live:!0,scrollContainer:null}).init();{let a=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[];a.forEach(e=>{$(".like-"+e).addClass("active").find(".like-status").html("已赞")}),$(".like").on("click",function(){const o=$(this).attr("data-cid");a=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[];let s=a.includes(o);$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"handle_agree",cid:o,type:s?"disagree":"agree"},success:t=>{if(1!==t.code)return;if($(this).find(".like-num").html(t.data.agree),s){const e=a.findIndex(e=>e===o);a.splice(e,1),$(this).removeClass("active"),$(this).find(".like-status").html("赞")}else a.push(o),$(this).addClass("active"),$(this).find(".like-status").html("已赞");const i=e("agree"),n=e(JSON.stringify(a));localStorage.setItem(i,n)}})})}});