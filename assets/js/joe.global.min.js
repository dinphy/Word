document.addEventListener("DOMContentLoaded",()=>{const e=e=>window.btoa(unescape(encodeURIComponent(e))),t=e=>decodeURIComponent(escape(window.atob(e)));var o=$(".joe_archive__list").attr("data-wow");"off"!==o&&o&&new WOW({boxClass:"wow",animateClass:"animated ".concat(o),offset:0,mobile:!0,live:!0,scrollContainer:null}).init();{let o=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[];o.forEach(e=>{$(".like-"+e).addClass("active").find(".like-status").html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path fill="none" d="M0 0h24v24H0z"/><path d="M2 9h3v12H2a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1zm5.293-1.293l6.4-6.4a.5.5 0 0 1 .654-.047l.853.64a1.5 1.5 0 0 1 .553 1.57L14.6 8H21a2 2 0 0 1 2 2v2.104a2 2 0 0 1-.15.762l-3.095 7.515a1 1 0 0 1-.925.619H8a1 1 0 0 1-1-1V8.414a1 1 0 0 1 .293-.707z"/></svg>')}),$(".like").on("click",function(){const a=$(this).attr("data-cid");o=localStorage.getItem(e("agree"))?JSON.parse(t(localStorage.getItem(e("agree")))):[];let n=o.includes(a);$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"handle_agree",cid:a,type:n?"disagree":"agree"},success:t=>{if(1!==t.code)return;if($(this).find(".like-num").html(t.data.agree),n){const e=o.findIndex(e=>e===a);o.splice(e,1),$(this).removeClass("active"),Qmsg.info("我会努力的~"),$(this).find(".like-status").html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path fill="none" d="M0 0h24v24H0z"/><path d="M14.6 8H21a2 2 0 0 1 2 2v2.104a2 2 0 0 1-.15.762l-3.095 7.515a1 1 0 0 1-.925.619H2a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1h3.482a1 1 0 0 0 .817-.423L11.752.85a.5.5 0 0 1 .632-.159l1.814.907a2.5 2.5 0 0 1 1.305 2.853L14.6 8zM7 10.588V19h11.16L21 12.104V10h-6.4a2 2 0 0 1-1.938-2.493l.903-3.548a.5.5 0 0 0-.261-.571l-.661-.33-4.71 6.672c-.25.354-.57.644-.933.858zM5 11H3v8h2v-8z"/></svg>')}else o.push(a),$(this).addClass("active"),Qmsg.success("谢谢你支持~"),$(this).find(".like-status").html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path fill="none" d="M0 0h24v24H0z"/><path d="M2 9h3v12H2a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1zm5.293-1.293l6.4-6.4a.5.5 0 0 1 .654-.047l.853.64a1.5 1.5 0 0 1 .553 1.57L14.6 8H21a2 2 0 0 1 2 2v2.104a2 2 0 0 1-.15.762l-3.095 7.515a1 1 0 0 1-.925.619H8a1 1 0 0 1-1-1V8.414a1 1 0 0 1 .293-.707z"/></svg>');const s=e("agree"),i=e(JSON.stringify(o));localStorage.setItem(s,i)}})})}localStorage.getItem("data-night")?($(".joe_action_item.mode .icon-1").addClass("active"),$(".joe_action_item.mode .icon-2").removeClass("active")):($("html").removeAttr("data-night"),$(".joe_action_item.mode .icon-1").removeClass("active"),$(".joe_action_item.mode .icon-2").addClass("active")),$(".joe_action_item.mode").on("click",()=>{localStorage.getItem("data-night")?($(".joe_action_item.mode .icon-1").removeClass("active"),$(".joe_action_item.mode .icon-2").addClass("active"),$("html").removeAttr("data-night"),localStorage.removeItem("data-night"),$(".joe_batten img,.joe_detail__article img:not([class]),.joe_batten .author__user-item #hitokoto").css("filter","none")):($(".joe_action_item.mode .icon-1").addClass("active"),$(".joe_action_item.mode .icon-2").removeClass("active"),$("html").attr("data-night","night"),localStorage.setItem("data-night","night"),$(".joe_batten img,.joe_detail__article img:not([class]),.joe_batten .author__user-item #hitokoto").css("filter","brightness(0.5)"))}),Joe.IS_MOBILE||"off"===Joe.DYNAMIC_BACKGROUND||!Joe.DYNAMIC_BACKGROUND||Joe.WALLPAPER_BACKGROUND_PC||$.getScript(window.Joe.THEME_URL+`assets/backdrop/${Joe.DYNAMIC_BACKGROUND}`),$(".joe_header__above-search .input").on("click",e=>{e.stopPropagation(),$(".joe_header__above-search .result").addClass("active")}),$(document).on("click",function(){$(".joe_header__above-search .result").removeClass("active")}),$(".joe_dropdown").each(function(e,t){const o=$(this).find(".joe_dropdown__menu"),a=$(t).attr("trigger")||"click",n=$(t).attr("placement")||$(this).height()||0;o.css("top",n),"hover"===a?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",function(e){$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()}),o.on("click",e=>e.stopPropagation()))}),$(".joe_dropdown__link").has(".joe_dropdown__submenu").hover(function(){$(this).children(".joe_dropdown__submenu").stop().toggleClass("active")}),$(".joe_action_item.aside").on("click",function(){$(".joe_aside,.joe_menu").toggle(100)});{let e=null;const t=()=>(document.documentElement.scrollTop||document.body.scrollTop)>300?$(".joe_action_item.scroll").addClass("active"):$(".joe_action_item.scroll").removeClass("active");t(),$(document).on("scroll",()=>{clearTimeout(e),e=setTimeout(t,80)}),$(".joe_action_item.scroll").on("click",()=>window.scrollTo({top:0,behavior:"smooth"}))}if($(".joe_aside__item.timelife").length){let e=[{title:"今日已经过去",endTitle:"小时",num:0,percent:"0%"},{title:"这周已经过去",endTitle:"天",num:0,percent:"0%"},{title:"本月已经过去",endTitle:"天",num:0,percent:"0%"},{title:"今年已经过去",endTitle:"个月",num:0,percent:"0%"}];{let t=+new Date,o=new Date((new Date).toLocaleDateString()).getTime(),a=(t-o)/1e3/60/60,n=a/24*100;e[0].num=parseInt(a),e[0].percent=parseInt(n)+"%"}{let t={0:7,1:1,2:2,3:3,4:4,5:5,6:6},o=t[(new Date).getDay()],a=o/7*100;e[1].num=parseInt(o),e[1].percent=parseInt(a)+"%"}{let t=(new Date).getFullYear(),o=(new Date).getDate(),a=(new Date).getMonth()+1,n=new Date(t,a,0).getDate(),s=o/n*100;e[2].num=o,e[2].percent=parseInt(s)+"%"}{let t=(new Date).getMonth()+1,o=t/12*100;e[3].num=t,e[3].percent=parseInt(o)+"%"}let t="";e.forEach((e,o)=>{t+=`\n\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t\t\t${e.title}\n\t\t\t\t\t\t\t\t<span class="text">${e.num}</span>\n\t\t\t\t\t\t\t\t${e.endTitle}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar-inner progress-bar-inner-${o}" style="width: ${e.percent}"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="progress-percentage">${e.percent}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`}),$(".joe_aside__item.timelife .joe_aside__item-contain").html(t)}if($(".joe_aside__item.tags").length){const e=[],t=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"],o=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);$(".joe_aside__item-contain .list li").each((a,n)=>{e.push({label:$(n).attr("data-label"),url:$(n).attr("data-url"),target:"_blank",fontColor:t[o(0,t.length-1)],fontSize:15})}),$(".joe_aside__item-contain .tag").svg3DTagCloud({entries:e,width:220,height:220,radius:"65%",radiusMin:75,bgDraw:!1,fov:800,speed:.5,fontWeight:500})}if($(".joe_comment").length&&($(".joe_comment__respond-type .item").on("click",function(){$(this).addClass("active").siblings().removeClass("active"),"draw"===$(this).attr("data-type")?($(".joe_comment__respond-form .body .draw").show().siblings().hide(),$("#joe_comment_draw").prop("width",$(".joe_comment__respond-form .body").width()),$(".joe_comment__respond-form").attr("data-type","draw")):($(".joe_comment__respond-form .body .text").show().siblings().hide(),$(".joe_comment__respond-form").attr("data-type","text"))}),$(".joe_comment__respond-form .body").mouseenter(function(){$(".joe_comment__respond-form .body .text").focus()})),$("#joe_comment_draw").length&&(window.sketchpad=new Sketchpad({element:"#joe_comment_draw",height:200,penSize:5,color:"303133"}),$(".joe_comment__respond-form .body .draw .icon-undo").on("click",()=>window.sketchpad.undo()),$(".joe_comment__respond-form .body .draw .icon-animate").on("click",()=>window.sketchpad.animate(10)),$(".joe_comment__respond-form .body .draw .line li").on("click",function(){window.sketchpad.penSize=$(this).attr("data-line"),$(this).addClass("active").siblings().removeClass("active")}),$(".joe_comment__respond-form .body .draw .color li").on("click",function(){window.sketchpad.color=$(this).attr("data-color"),$(this).addClass("active").siblings().removeClass("active")})),$(".joe_comment__respond").length){const e=$(".joe_comment__respond");$(".joe_comment__reply").on("click",function(){const t=$(this).attr("data-coid"),o=$("#"+$(this).attr("data-id"));e.find(".joe_comment__respond-form").attr("data-coid",t),o.append(e),$(".joe_comment__respond-type .item[data-type='text']").click(),$(".joe_comment__cancle").show(),window.scrollTo({top:o.offset().top-$(".joe_header").height()-15,behavior:"smooth"})}),$(".joe_comment__cancle").on("click",function(){e.find(".joe_comment__respond-form").removeAttr("data-coid"),$(".joe_comment__cancle").hide(),$(".joe_comment__title").after(e),$(".joe_comment__respond-type .item[data-type='text']").click()})}if($(".joe_comment").length){let e=!1;$(".joe_comment__respond-form").on("submit",function(t){t.preventDefault();const o=$(".joe_comment__respond-form").attr("action")+"?time="+ +new Date,a=$(".joe_comment__respond-form").attr("data-type"),n=$(".joe_comment__respond-form").attr("data-coid"),s=$(".joe_comment__respond-form .head input[name='author']").val(),i=$(".joe_comment__respond-form input[name='_']").val(),r=$(".joe_comment__respond-form .head input[name='mail']").val(),c=$(".joe_comment__respond-form .head input[name='url']").val();let _=$(".joe_comment__respond-form .body textarea[name='text']").val();if(""===s.trim())return Qmsg.info("请输入昵称！");if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(r))return Qmsg.info("请输入正确的邮箱！");if("text"===a&&""===_.trim())return Qmsg.info("请输入评论内容！");if("draw"===a){const e=$("#joe_comment_draw")[0].toDataURL("image/webp",.1);_="{!{"+e+"}!} "}e||(e=!0,$(".joe_comment__respond-form .foot .submit button").html("发送中..."),$.ajax({url:o,type:"POST",data:{author:s,mail:r,text:_,parent:n,url:c,_:i},dataType:"text",success(t){let o=[],a="";o=$(t).contents(),Array.from(o).forEach(e=>{"container"===e.parentNode.className&&(a=e)}),/Joe/.test(t)?window.location.reload():(Qmsg.warning(a.textContent.trim()||""),e=!1,$(".joe_comment__respond-form .foot .submit button").html("发表评论"))},error(){e=!1,$(".joe_comment__respond-form .foot .submit button").html("发表评论"),Qmsg.warning("发送失败！请刷新重试！")}}))})}if($(".comment-list__item .term .content .user .author a").each((e,t)=>$(t).attr("target","_blank")),$(".joe_comment .joe_pagination a").each((e,t)=>{const o=$(t).attr("href");o&&o.includes("#")&&$(t).attr("href",o.replace("#comments","?scroll=joe_comment"))}),Joe.DOCUMENT_TITLE){const e=document.title;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?document.title=Joe.DOCUMENT_TITLE:document.title=e})}$(".joe_header__above-slideicon").on("click",function(){$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").hasClass("active")?($(".joe_header__mask").removeClass("active slideout"),$(".joe_header__slideout").removeClass("active")):($(".joe_header__mask").addClass("active slideout"),$(".joe_header__slideout").addClass("active"))}),$(".joe_header__above-noticeicon").on("click",function(){$(".joe_header__notice").removeClass("active"),$(".joe_header__notice").hasClass("active")?($(".joe_header__mask").removeClass("active slideout"),$(".joe_header__notice").removeClass("active")):($(".joe_header__mask").addClass("active"),$(".joe_header__notice").addClass("active")),$(".joe_header__notice-close svg").on("click",function(){$(".joe_header__notice").hasClass("active")&&($(".joe_header__mask").removeClass("active slideout"),$(".joe_header__notice").removeClass("active"))})}),$(".joe_header__above-searchicon").on("click",function(){$(".joe_header__slideout").removeClass("active"),$(".joe_header__searchout").hasClass("active")?($(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active")):($(".joe_header__mask").addClass("active"),$(".joe_header__searchout").addClass("active"))}),$(".joe_header__mask").on("click",function(){$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__notice").removeClass("active"),$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").removeClass("active")}),$(".joe_header__slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".joe_header__slideout-menu .panel").on("click",function(){const e=$(this).parent().parent();e.find(".panel").not($(this)).removeClass("in"),e.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")});{const e=()=>{const e=new Date(Joe.BIRTHDAY),t=+new Date,o=t-e.getTime();let a=o/864e5,n=Math.floor(a),s=24*(a-n),i=Math.floor(s),r=60*(s-i),c=Math.floor(r),_=60*(r-c),l=Math.floor(_);a=String(n).padStart(2,0),s=String(i).padStart(2,0),r=String(c).padStart(2,0),_=String(l).padStart(2,0),$(".joe_run__day").html(a),$(".joe_run__hour").html(s),$(".joe_run__minute").html(r),$(".joe_run__second").html(_)};Joe.BIRTHDAY&&/(\d{4})\/(\d{1,2})\/(\d{1,2}) (\d{1,2})\:(\d{1,2})\:(\d{1,2})/.test(Joe.BIRTHDAY)&&(e(),setInterval(e,1e3))}$(".joe_owo__contain").length&&$(".joe_owo__target").length&&$.ajax({url:window.Joe.THEME_URL+"assets/json/joe.owo.json",dataType:"json",success(e){let t="",o="";for(let a in e){const n=e[a];t+=`<div class="item" data-type="${a}">${a}</div>`,o+=`\n                            <ul class="scroll" data-type="${a}">\n\t\t\t\t\t\t\t\t${n.map(e=>`<li class="item" data-text="${e.data}">${"颜文字"===a?`${e.icon}`:`<img src="${window.Joe.THEME_URL+e.icon}" alt="${e.data}"/>`}</li>`).join("")}\n                            </ul>\n                        `}$(".joe_owo__contain").html(`\n                        <div class="seat"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-4-7h8a4 4 0 1 1-8 0zm0-2a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm8 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/></svg></div>\n                        <div class="box">\n                            ${o}\n                            <div class="bar">${t}</div>\n                        </div>\n                    `),$(document).on("click",function(){$(".joe_owo__contain .box").stop().slideUp("fast")}),$(".joe_owo__contain .seat").on("click",function(e){e.stopPropagation(),$(this).siblings(".box").stop().slideToggle("fast")}),$(".joe_owo__contain .box .bar .item").on("click",function(e){e.stopPropagation(),$(this).addClass("active").siblings().removeClass("active");const t='.joe_owo__contain .box .scroll[data-type="'+$(this).attr("data-type")+'"]';$(t).show().siblings(".scroll").hide()}),$(".joe_owo__contain .scroll .item").on("click",function(){const e=$(this).attr("data-text");$(".joe_owo__target").insertContent(e)}),$(".joe_owo__contain .box .bar .item").first().click()}});{let e=Joe.MOTTO;e||(e="有钱终成眷属，没钱亲眼目睹"),e.includes("http")?$.ajax({url:e,dataType:"text",success:e=>$(".joe_motto").html(e)}):$(".joe_motto").html(e)}{let e=!0;const t=t=>{if($(document).width()<=768)if(window.pageYOffset>=$(".joe_header").height()&&t<=0){if(e)return;$(".joe_header").addClass("active"),$(".joe_tabbar").addClass("active"),e=!0}else{if(!e)return;$(".joe_header").removeClass("active"),$(".joe_tabbar").removeClass("active"),e=!1}else if(window.pageYOffset>=$(".joe_header").height()&&t<=0){if(e)return;$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()+15),$(".joe_menu .joe_header__above-nav").addClass("active").css("top",$(".joe_header").height()+15),e=!0}else{if(!e)return;$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()),$(".joe_menu .joe_header__above-nav").removeClass("active").css("top",$(".joe_header").height()),e=!1}};let o=window.pageYOffset;t(o);let a=Date.now();document.addEventListener("scroll",()=>{let e=Date.now();e-a>15&&(t(o-window.pageYOffset),o=window.pageYOffset,o>=$(".joe_header").height()?$(".joe_header").addClass("active"):$(".joe_header").removeClass("active")),a=e})}{let e=0;function a(){"loading..."!==$(".joe_census__filing .button").html()&&$.ajax({url:Joe.BASE_API,type:"POST",dataType:"json",data:{routeType:"article_filing",page:++e},success(e){if(!e.length)return $(".joe_census__filing .item.load").remove(),Qmsg.warning("没有更多内容了");let t="";e.forEach(e=>{t+=`\n\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t<div class="tail"></div>\n\t\t\t\t\t\t\t<div class="head"></div>\n\t\t\t\t\t\t\t<div class="wrapper">\n\t\t\t\t\t\t\t\t<div class="panel">${e.date}<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M21.6 772.8c28.8 28.8 74.4 28.8 103.2 0L512 385.6l387.2 387.2c28.8 28.8 74.4 28.8 103.2 0 28.8-28.8 28.8-74.4 0-103.2L615.2 282.4l-77.6-77.6c-14.4-14.4-37.6-14.4-51.2 0l-77.6 77.6L21.6 669.6c-28.8 28.8-28.8 75.2 0 103.2z" /></svg></div>\n\t\t\t\t\t\t\t\t<ol class="panel-body">\n\t\t\t\t\t\t\t\t\t${e.list.map(e=>`<li><a rel="noopener noreferrer" target="_blank" href="${e.permalink}">${e.title}</a></li>`).join("")}\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`}),$("#filing").append(t),$("#filing .item:first-child .panel").click(),$(".joe_census__filing .button").html("加载更多")}})}a(),$(".joe_census__filing .content").on("click",".panel",function(){const e=$(this).parents(".content");e.find(".panel").not($(this)).removeClass("in"),e.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")}),$(".joe_census__filing .button").on("click",function(){a(),$(this).html("loading...")})}if($(".joe_cross").length){let e=!1;$(".joe_cross__respond-form").on("submit",function(t){t.preventDefault();const o=$(".joe_cross__respond-form").attr("action")+"?time="+ +new Date,a=$(".joe_cross__respond-form").attr("data-type"),n=$(".joe_cross__respond-form").attr("data-coid"),s=$(".joe_cross__respond-form .head input[name='author']").val(),i=$(".joe_cross__respond-form input[name='_']").val(),r=$(".joe_cross__respond-form .head input[name='mail']").val(),c=$(".joe_cross__respond-form .head input[name='url']").val();let _=$(".joe_cross__respond-form .body textarea[name='text']").val();return"text"===a&&""===_.trim()?Qmsg.info("别急，说一句呗~"):$("#author").length&&""===s.trim()?$("#author").focus():$("#mail").length&&!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(r)?$("#mail").focus():void(e||(e=!0,$(".joe_cross__respond-form .foot .submit button").html("发表中..."),$.ajax({url:o,type:"POST",data:{author:s,mail:r,text:_,parent:n,url:c,_:i},dataType:"text",success(t){let o=[],a="";o=$(t).contents(),Array.from(o).forEach(e=>{"container"===e.parentNode.className&&(a=e)}),/Joe/.test(t)?window.location.reload():(Qmsg.warning(a.textContent.trim()||""),e=!1,$(".joe_cross__respond-form .foot .submit button").html("确定"))},error(){e=!1,$(".joe_cross__respond-form .foot .submit button").html("确定"),Qmsg.error("失败了，刷新重试~")}})))})}if($(".joe_cross .content img:not(img.owo_image)").each(function(){$(this).wrap($(`<span style="display: block;cursor: pointer;" data-fancybox="Joe" href="${$(this).attr("src")}"></span>`))}),$(".joe_cross__respond").length){const e=$(".joe_cross__respond");$(".joe_cross__reply").on("click",function(){const t=$(this).attr("data-coid"),o=$("#"+$(this).attr("data-id"));e.show(),e.find(".joe_cross__respond-form").attr("data-coid",t),o.append(e),$(".joe_cross__respond-type .item[data-type='text']").click(),$("#textarea").focus(),$(".joe_cross__cancle").show(),window.scrollTo({top:o.offset().top-$(".joe_header").height()-15,behavior:"smooth"})}),$(".joe_cross__cancle").on("click",function(){$(".joe_cross__respond-form .head").length&&e.hide(),e.find(".joe_cross__respond-form").removeAttr("data-coid"),$(".joe_cross__cancle").hide(),$(".joe_cross__title").after(e),$(".joe_cross__respond-type .item[data-type='text']").click(),window.scrollTo({top:$(".joe_cross").offset().top-$(".joe_header").height()-15,behavior:"smooth"})})}$(".comment-list__item .term .content .user .author a").each((e,t)=>$(t).attr("target","_blank")),$(".joe_cross__panel-header").click(function(){$(this).hide(),$(this).next(".joe_cross__panel-body").slideToggle(),$(this).parent(".joe_cross__panel").siblings().find(".joe_cross__panel-body").slideUp()}),$(".joe_cross .joe_pagination a").each((e,t)=>{const o=$(t).attr("href");o&&o.includes("#")&&$(t).attr("href",o.replace("#comments","?scroll=joe_cross"))}),$(".support").on("click",function(){$.ajax({url:"/?action=support",type:"POST",data:{coid:$(this).data("coid")},dataType:"json",success:e=>{e.success?($(this).removeClass("zm zm-unlike").addClass("zm zm-like"),$(this).text(e.count),Qmsg.success("谢谢你支持~")):Qmsg.info("明天再支持~")}})}),$(".joe_header__above-sign button[type='button']").on("click",function(e){return""===$(".joe_header__above-sign input[name='name']").val().trim()?($(".joe_header__above-sign input[name='name']").focus(),Qmsg.warning("请输入昵称")):""===$(".joe_header__above-sign input[name='password']").val().trim()?($(".joe_header__above-sign input[name='password']").focus(),Qmsg.warning("请输入密码")):($(this).html("登录中...").attr("disabled",!0),void $(".joe_header__above-sign form").submit())}),$(".joe_header__above-sign form").keydown(function(){var e=window.event;if(e&&13==e.keyCode){if(""===$(".joe_header__above-sign input[name='name']").val().trim())return $(".joe_header__above-sign input[name='name']").focus(),Qmsg.warning("请输入昵称");if(""===$(".joe_header__above-sign input[name='password']").val().trim())return $(".joe_header__above-sign input[name='password']").focus(),Qmsg.warning("请输入密码");$(this).submit()}}),$("#loginForm button[type='button']").on("click",function(e){return""===$("#loginForm input[name='name']").val().trim()?Qmsg.warning("请输入昵称"):""===$("#loginForm input[name='password']").val().trim()?Qmsg.warning("请输入密码"):($(this).html("登录中...").attr("disabled",!0),void $("#loginForm").submit())}),$(".privacy").on("click",function(){0==$(".lock").css("opacity")?($("#textarea").val("私语# ").focus(),$(".body").addClass("active"),$(".lock").addClass("active"),$(".unlock").removeClass("active")):($("#textarea").val(""),$(".body").removeClass("active"),$(".lock").removeClass("active"),$(".unlock").addClass("active"))})});